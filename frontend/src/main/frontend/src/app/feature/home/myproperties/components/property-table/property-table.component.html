<div>

   
    <div fxLayout="row wrap" fxLayoutAlign="start center" fxLayoutGap="10px"> 
        
        <form [formGroup] ="filterForm" class="form-inline">

      
            <mat-form-field>
                <input matInput  placeholder="Enter property title"
                formControlName="propertyTitle" />
                <button mat-button *ngIf="filterForm.get('propertyTitle').dirty" matSuffix mat-icon-button aria-label="Clear" (click)="clear()">
                        <mat-icon>close</mat-icon>
                 </button>
        
            </mat-form-field>
       
            <mat-form-field>
                    <mat-select matInput name="mySelect" placeholder="Select property status"
                            formControlName="propertyStatus" >
                        <mat-option *ngFor="let status of propertyStatuses" [value]="status.value">
                            {{status.value}}
                        </mat-option>
                    </mat-select>
            </mat-form-field>

            <mat-form-field>
                <mat-select matInput name="mySelect" placeholder="Select property type"
                        formControlName="propertyType" >
                    <mat-option *ngFor="let type of propertyTypes" [value]="type.value">
                        {{type.value}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
          
        </form>
   </div>
       

    <!-- spanner-->
    <div class="spinner-container" *ngIf="dataSource.loading$ | async">
        <mat-spinner></mat-spinner>
    </div>

   
    <div>
        <mat-paginator [length]="propertyCount" [pageSize]="3"
            [pageSizeOptions]="[3, 5, 10]">
        </mat-paginator>
         <mat-table [dataSource]="dataSource" mat-elevation-z8 
                   matSort matSortActive="type" matSortDirection="asc" matSortDisableClear>

         <!-- Checkbox Column -->
            <ng-container matColumnDef="select">
                <mat-header-cell *matHeaderCellDef>
                    <mat-checkbox (change)="$event ? masterToggle() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()">
                    </mat-checkbox>
                </mat-header-cell>
                <mat-cell *matCellDef="let row">
                    <mat-checkbox (click)="$event.stopPropagation()"
                        (change)="$event ? selection.toggle(row) : null"
                        [checked]="selection.isSelected(row)">
                     </mat-checkbox>
                </mat-cell>
            </ng-container>
              <!-- property fields  -->
            <ng-container matColumnDef="type">
                    <mat-header-cell *matHeaderCellDef mat-sort-header> Type </mat-header-cell>
                    <mat-cell *matCellDef="let property"> {{property.type}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="title">
                  <mat-header-cell *matHeaderCellDef> Title </mat-header-cell>
                  <mat-cell *matCellDef="let property"> {{property.title}} </mat-cell>
            </ng-container>
            
            <ng-container matColumnDef="state">
                  <mat-header-cell *matHeaderCellDef> State</mat-header-cell>
                  <mat-cell *matCellDef="let property"> {{property.address.state}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="city">
                  <mat-header-cell *matHeaderCellDef> City</mat-header-cell>
                  <mat-cell *matCellDef="let property"> {{property.address.city}} </mat-cell>
            </ng-container>
            <ng-container matColumnDef="status">
                  <mat-header-cell *matHeaderCellDef> Status</mat-header-cell>
                  <mat-cell *matCellDef="let property" > {{property.status}} </mat-cell>
            </ng-container>
              <!-- actions -->
            <ng-container matColumnDef="actions">
                  <mat-header-cell *matHeaderCellDef> Actions</mat-header-cell>
                  <mat-cell *matCellDef="let property">
                      <button mat-icon-button color="primary" (click)="addNew()">
                          <mat-icon aria-label="Add room type"   matTooltip="Click to add new room type." matTooltipPosition="right">add</mat-icon>
                        
                      </button>

                      <button mat-icon-button color="accent" (click)="editProperty(property)">
                         <mat-icon aria-label="Edit" matTooltip="Click to edit property details." matTooltipPosition="right">edit</mat-icon>
                      </button>

                      <button mat-icon-button color="accent" (click)="deleteItem( property.id)">
                         <mat-icon aria-label="Delete" matTooltip="Click to delete selected property." matTooltipPosition="right">delete</mat-icon>
                      </button>
                  </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row [ngClass]="{'highlight': index%2 == 1,'selected': selection.isSelected(row)}" 
                        *matRowDef="let row; columns: displayedColumns;let index = index" >
            </mat-row>
              
          </mat-table>
            <!-- pagination -->
          <mat-paginator [length]="propertyCount" [pageSize]="3"
                   [pageSizeOptions]="[3, 5, 10]">
          </mat-paginator>
  
    </div>
     <!-- no property listing -->
  
     <div class="no-results" [style.display]="dataSource.length == 0 ? '' : 'none'">
        No results
    </div>
  
 
 

 



</div>